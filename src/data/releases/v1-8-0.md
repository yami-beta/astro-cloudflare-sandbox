---
title: "バージョン 1.8.0 - Server Output機能の実験的サポート"
version: "1.8.0"
date: 2024-11-15
category: "minor"
breaking: false
features:
  [
    "実験的なServer Output機能の追加",
    "Cloudflare Workers統合の改善",
    "新しいデバッグツール",
    "画像最適化パイプライン",
  ]
fixes: ["HMRの安定性向上", "CSSインジェクションの問題を修正"]
---

# バージョン 1.8.0

Server Output機能の実験的サポートを含む、重要なアップデートです。

## 🎉 新機能

### 実験的なServer Output機能

SSR（Server-Side Rendering）の新しい実装として、Server Output機能を実験的に追加しました。

**主な特徴:**

- リクエスト時の動的レンダリング
- URLパラメータによる動的コンテンツ
- リアルタイムデータの統合

**有効化方法:**

```javascript
// astro.config.mjs
export default defineConfig({
  experimental: {
    serverOutput: true,
  },
});
```

### Cloudflare Workers統合の改善

Cloudflare Workersへのデプロイがより簡単になりました：

- **自動設定**: `wrangler.json`の自動生成
- **エッジランタイム対応**: Workers環境での最適化
- **KVストレージ**: Cloudflare KVとの統合

### 新しいデバッグツール

開発体験を向上させるデバッグツールを追加：

- **パフォーマンスプロファイラー**: ボトルネックの特定
- **コンポーネントインスペクター**: リアルタイムでpropsを確認
- **ネットワークモニター**: APIコールの追跡

使用方法:

```bash
astro dev --debug
```

### 画像最適化パイプライン

画像の自動最適化機能を追加しました：

- **自動リサイズ**: レスポンシブ画像の生成
- **フォーマット変換**: WebP/AVIF への自動変換
- **遅延読み込み**: ネイティブlazy loading

```astro
---
import { Image } from "astro:assets";
---

<Image
  src="/hero.jpg"
  alt="Hero image"
  widths={[400, 800, 1600]}
  formats={["webp", "avif"]}
/>
```

## 🐛 修正

### HMR（Hot Module Replacement）の安定性

開発中のHMRが不安定になる問題を修正しました：

- WebSocket接続の改善
- 状態保持の最適化
- エラーリカバリーの強化

### CSSインジェクションの問題

動的にインポートされたコンポーネントのCSSが正しく適用されない問題を修正しました。

## 🔬 実験的機能について

Server Output機能は実験的な実装です。本番環境での使用は推奨しません。フィードバックをお待ちしています。

**既知の制限:**

- 一部のnpmパッケージとの互換性問題
- メモリ使用量が通常より多い
- エッジケースでのエラーハンドリング

## 📚 ドキュメント

新機能の詳細なドキュメントは以下をご覧ください：

- [Server Output ガイド](https://docs.example.com/server-output)
- [Cloudflare Workers 統合](https://docs.example.com/cloudflare)
- [画像最適化](https://docs.example.com/images)

## ⬆️ アップグレード

```bash
npm install astro@1.8.0
```

**注意事項:**

- Node.js 16.0以上が必要です
- 実験的機能を使用する場合は、設定ファイルの更新が必要です

## 🎯 次回予告

バージョン1.9.0では以下の機能を予定しています：

- View Transitions APIのサポート
- 新しいルーティングシステム
- パフォーマンスの更なる改善

## 👥 コントリビューター

このリリースに貢献してくださった20名以上のコントリビューターに感謝いたします！
